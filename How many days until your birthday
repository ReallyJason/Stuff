#include <iostream>
#include <string>
#include <ctime>
using std::cin;
using std::cout;
using std::string;
using std::endl;

void birthday (){
    string bMonth;
    int bDay, bYear, b_month_number=100;
    int a[12][1];
    
    setenv("TZ", "EST5EDT", 1); // Set the timezone to Eastern Time (ET)
    tzset(); // Apply the changes
    time_t currentTime; // Get the current time in Eastern Time
    time(&currentTime);
    struct tm *localTime = localtime(&currentTime); // Convert the time to local time (Eastern Time)
    
    std::time_t t = std::time(nullptr);
    std::tm *const pTInfo = std::localtime(&t);
    int day_in_month=pTInfo->tm_mday; //day in the month
    int todayMonth=pTInfo->tm_mon; //the #month-1
    int thisYear=(1900 + pTInfo->tm_year); //tm_year shows the number of years since 1900
    
    cout << "When is your birthday? ";
    cin >> bMonth >> bDay >> bYear;
    
    {
    if (bMonth=="January"){
        if(bDay>31 || bDay<1){
            cout << "The day of your birth month is impossible.";
            exit(0);
        }
        b_month_number=1;
    }
    if (bMonth=="February"){
        if(bDay>29 || bDay<1){
            cout << "The day of your birth month is impossible.";
            exit(0);
        }
        b_month_number=2;
    }
    if (bMonth=="March"){
        if(bDay>31 || bDay<1){
            cout << "The day of your birth month is impossible.";
            exit(0);
        }
        b_month_number=3;
    }
    if (bMonth=="April"){
        if(bDay>30 || bDay<1){
            cout << "The day of your birth month is impossible.";
            exit(0);
        }
        b_month_number=4;
    }
    if (bMonth=="May"){
        if(bDay>31 || bDay<1){
            cout << "The day of your birth month is impossible.";
            exit(0);
        }
        b_month_number=5;
    }
    if (bMonth=="June"){
        if(bDay>30 || bDay<1){
            cout << "The day of your birth month is impossible.";
            exit(0);
        }
        b_month_number=6;
    }
    if (bMonth=="July"){
        if(bDay>31 || bDay<1){
            cout << "The day of your birth month is impossible.";
            exit(0);
        }
        b_month_number=7;
    }
    if (bMonth=="August"){
        if(bDay>31 || bDay<1){
            cout << "The day of your birth month is impossible.";
            exit(0);
        }
        b_month_number=8;
    }
    if (bMonth=="September"){
        if(bDay>30 || bDay<1){
            cout << "The day of your birth month is impossible.";
            exit(0);
        }
        b_month_number=9;
    }
    if (bMonth=="October"){
        if(bDay>31 || bDay<1){
            cout << "The day of your birth month is impossible.";
            exit(0);
        }
        b_month_number=10;
    }
    if (bMonth=="November"){
        if(bDay>30 || bDay<1){
            cout << "The day of your birth month is impossible.";
            exit(0);
        }
        b_month_number=11;
    }
    if (bMonth=="December"){
        if(bDay>31 || bDay<1){
            cout << "The day of your birth month is impossible.";
            exit(0);
        }
        b_month_number=12;
    }
    if(b_month_number<1 || b_month_number>12){
        cout << "You've incorrectly spelled the month.";
        exit(0);
    }
    }
    
    if(b_month_number<todayMonth+1){
        if((((thisYear+1) % 4 == 0) && ((thisYear+1) % 100 != 0)) || ((thisYear+1) % 400 == 0)) int a[12][1]={{31},{29},{31},{30},{31},{30},{31},{31},{30},{31},{30},{31}};
        else int a[12][1]={{31},{28},{31},{30},{31},{30},{31},{31},{30},{31},{30},{31}};
    }
    else{
        if(((thisYear % 4 == 0) && (thisYear % 100 != 0)) || (thisYear % 400 == 0)) int a[12][1]={{31},{29},{31},{30},{31},{30},{31},{31},{30},{31},{30},{31}};
        else int a[12][1]={{31},{28},{31},{30},{31},{30},{31},{31},{30},{31},{30},{31}};
    }
    static int bdate=0;
    
    if(b_month_number==todayMonth+1){
        if(day_in_month>bDay)cout << "Your birthday will be in " << (bDay-day_in_month+365) << " days.";
        if(day_in_month<bDay)cout << "Your birthday will be in " << bDay-day_in_month << " days.";
        if(day_in_month==bDay)cout << "Today is your birthday!";
    }
    if(b_month_number>todayMonth+1){
        if(b_month_number-todayMonth==2){
            bdate=((a[todayMonth][0]-day_in_month)+bDay);
            cout << "Your birthday will be in " << bdate << " days.";
            exit(0);
        }
        else for(int i=todayMonth+1;i<b_month_number-1;i++)bdate=bdate+a[i][0];
        bdate=bdate+(a[todayMonth][0]-day_in_month)+bDay;
        cout << "Your birthday will be in " << bdate << " days.";
    }
    if(b_month_number<todayMonth+1){
        if(todayMonth+1==12 && b_month_number==1){
            bdate=((a[todayMonth%11][0]-day_in_month)+bDay);
            cout << "Your birthday will be in " << bdate << " days.";
        }
        else{
            for(int i=1;i<(b_month_number+todayMonth-2);i++){
                bdate=bdate+a[i%12][0];
            }
            bdate=bdate+(a[todayMonth][0]-day_in_month)+bDay;
            cout << "Your birthday will be in " << bdate << " days.";
        }
    }
}

int main(){
    birthday();
    return 0;
}
